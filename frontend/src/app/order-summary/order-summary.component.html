<main>
  <mat-card appearance="outlined" class="container mat-elevation-z6 mat-own-card">
    <section class="mdc-card container">
      <section class="column flex-50">
        @if (address && paymentMethod) {
        <section class="container">
          <!-- Delivery Address Card -->
          <mat-card appearance="outlined" class="mat-elevation-z0 flex-60">
            <section class="mdc-card">
              <p><b>{{"LABEL_DELIVERY_ADDRESS" | translate}}</b></p>
              <p>{{address?.fullName}}</p>
              <p>{{address?.streetAddress}}, {{address?.city}}, {{address?.state}}, {{address?.zipCode}}</p>
              <p>{{address?.country}}</p>
              <p><span>{{"PHONE_NUMBER" | translate}}</span> {{address?.mobileNum}}</p>
            </section>
          </mat-card>
          <!-- Payment Method Card -->
          @if (paymentMethod !== 'wallet') {
          <mat-card appearance="outlined" class="mat-elevation-z0 flex-40">
            <section class="mdc-card">
              <p><b>{{"PAYMENT_METHOD" | translate}}</b></p>
              <p><span>{{"CARD_ENDING_IN" | translate}}</span> {{paymentMethod?.cardNum}}</p>
              <p><span>{{"CARD_HOLDER" | translate}}"</span> {{paymentMethod?.fullName}}</p>
            </section>
          </mat-card>
          } @else {
          <!-- Digital Wallet (Fallback) -->
          <mat-card appearance="outlined" class="mat-elevation-z0 flex-40">
            <section class="mdc-card">
              <p><b>{{"PAYMENT_METHOD" | translate}}</b></p>
              <p><span>{{"DIGITAL_WALLET" | translate}}</span></p>
            </section>
          </mat-card>
          }
        </section>
        }
        <!-- Purchase Basket -->
        <app-purchase-basket id="app-purchase-basket" [allowEdit]="false" [totalPrice]="false"
          (emitTotal)="getMessage($event)"></app-purchase-basket>
      </section>

      <!-- Order Summary Card -->
      <section class="flex-50">
        <mat-card appearance="outlined" class="mat-elevation-z0 fill">
          <section class="mdc-card">
            <header class="order-summary">{{"ORDER_SUMMARY" | translate}}</header>
            <table class="mat-table">
              <tr class="mat-row">
                <td class="mat-cell label">{{"ITEMS" | translate}}</td>
                <td class="mat-cell price">{{ itemTotal?.toFixed(2) }}&curren;</td>
              </tr>
              <tr class="mat-row">
                <td class="mat-cell label">{{"DELIVERY" | translate}}</td>
                <td class="mat-cell price">{{ deliveryPrice.toFixed(2) }}&curren;</td>
              </tr>
              <tr class="mat-row">
                <td class="mat-cell label">{{"PROMOTION" | translate}}</td>
                <td class="mat-cell price">{{ promotionalDiscount.toFixed(2) }}&curren;</td>
              </tr>
              <tr class="mat-row">
                <td class="mat-footer-cell label">{{"LABEL_TOTAL_PRICE" | translate}}</td>
                <td class="mat-footer-cell price">{{ (itemTotal + deliveryPrice - promotionalDiscount)?.toFixed(2)
                  }}&curren;</td>
              </tr>
            </table>
            <!-- Checkout Button -->
            <button mat-raised-button mat-button class="btn btn-pay" color="primary" aria-label="Complete your purchase"
              id="checkoutButton" (click)="placeOrder()">
              <mat-icon>{{"monetization_on" | translate}}</mat-icon>
              <span>{{"PLACE_ORDER_AND_PAY" | translate}}</span>
            </button>
            <!-- Bonus Points -->
            <p class="bonus-points">{{ "CHECKOUT_FOR_BONUS_POINTS" | translate:{ bonus: bonus } }}</p>
          </section>
        </mat-card>
      </section>
    </section>
  </mat-card>
</main>