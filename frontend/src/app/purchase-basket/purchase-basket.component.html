<h1>
  {{"TITLE_BASKET" | translate}}
  <small>{{ userEmail }}</small>
</h1>

<mat-table [dataSource]="dataSource" class="basket-table">

  <!-- Single column: full vertical card per product -->
  <ng-container matColumnDef="productCard">
    <mat-cell *matCellDef="let element">
      <div class="product-card">
        <!-- image + title -->
        <div class="product-top">
          <img [src]="'assets/public/images/products/' + element.image" alt="{{ element.name }}" class="product-image" />
          <div class="product-title">{{ element.name }}</div>
        </div>

        <!-- quantity controls -->
        <div class="product-qty">
          @if (allowEdit) {
            <button mat-icon-button (click)="dec(element.BasketItem.id)" aria-label="decrease">
              <i class="fas fa-minus-square"></i>
            </button>
          }
          <span class="qty-count">{{ element.BasketItem.quantity }}</span>
          @if (allowEdit) {
            <button mat-icon-button (click)="inc(element.BasketItem.id)" aria-label="increase">
              <i class="fas fa-plus-square"></i>
            </button>
          }
        </div>

        <!-- price + delete -->
        <div class="product-bottom">
          <div class="product-price">{{ element.price }}¤</div>

          @if (allowEdit) {
            <button mat-icon-button class="delete-btn" (click)="delete(element.BasketItem.id)" aria-label="delete">
              <i class="far fa-trash-alt"></i>
            </button>
          }
        </div>
      </div>
    </mat-cell>
  </ng-container>

  <mat-row *matRowDef="let row; columns: tableColumns;"></mat-row>

</mat-table>

@if (totalPrice) {
  <div id="price">
    {{"LABEL_TOTAL_PRICE" | translate}}: {{ itemTotal }}¤
  </div>
}
