<main>
  <mat-card appearance="outlined" class="heading mat-elevation-z6 mat-own-card" style="margin-bottom:10px;">
    <div class="mdc-card">
      <h1>{{"LABEL_PHOTO_WALL" | translate}}</h1>
      <section>
        @if (!emptyState) {
        <section class="grid">
          @for (image of slideshowDataSource; track image) {
          <article class="container mat-elevation-z6">
            <img src="{{ image.url }}" alt="{{ image.caption }}" class="image">
            <footer class="overlay">
              <p>{{ image.caption }}</p>
              @if (twitterHandle) {
              <a href="https://twitter.com/intent/tweet?text={{ image.caption }} {{ twitterHandle }}&hashtags=appsec"
                target="_blank">
                <button mat-icon-button aria-label="Tweet">
                  <i class="fab fa-twitter fa-lg"></i>
                </button>
              </a>
              }
            </footer>
          </article>
          }
        </section>
        } @else {
        <mat-card appearance="outlined" class="mat-elevation-z0 emptyState">
          <section class="mdc-card">
            <img alt=" No results found" class="img-responsive noResult"
              src="assets/public/images/products/no-results.png">
            <mat-card-title>
              <span class="noResultText" translate>
                NO_SEARCH_RESULT
              </span>
            </mat-card-title>
            <mat-card-content>
              <p class="noResultText" translate>
                EMPTY_MEMORY_LIST
              </p>
            </mat-card-content>
          </section>
        </mat-card>
        }
      </section>


      @if (isLoggedIn()) {
      <section>
        <section style="margin-top: 10px;">
          <h2 translate>LABEL_SHARE_A_MEMORY</h2>
          <form [formGroup]="form" enctype="multipart/form-data">
            <div>
              <button mat-stroked-button type="button" (click)="filePicker.click()">{{'LABEL_PICK_IMAGE' | translate}}
              </button>
              <input type="file" name='file' #filePicker (change)="onImagePicked($event)">
            </div>
            @if (imagePreview !== '' && imagePreview && form.get('image').valid) {
            <div class="image-preview">
              <img [src]="imagePreview" [alt]="form.value.caption">
            </div>
            }
            <mat-form-field appearance="outline" color="accent">
              <mat-label translate>LABEL_CAPTION</mat-label>
              <input formControlName="caption" type="text" matInput>
              @if (form.get('caption').invalid) {
              <mat-error translate>{{'MANDATORY_CAPTION' | translate}}</mat-error>
              }
            </mat-form-field>
            <button id="submitButton" mat-raised-button color="primary" (click)="save()"
              [disabled]="form.get('image').invalid || form.get('caption').invalid">
              <mat-icon>send</mat-icon>
              {{'BTN_SUBMIT' | translate}}
            </button>
          </form>
        </section>
      </section>
      }
    </div>
  </mat-card>
</main>